@model IEnumerable<Category>

@{
    ViewData["Title"] = "Categories";

}

@* <h1>Categories</h1> *@

<div id="content" class="Categories">
    <ul id="list" class="container_categories">
        @foreach (var category in Model)
        {
            <li data-id="@category.CategoryId.ToString()" class="category @(category.CategoryName == Model.First().CategoryName ? "selected" : "")">
                @* <img class="card-img-top" src="..." alt="Card image cap"> *@

                <span class="category_title">
                    @Html.DisplayFor(modelItem => category.CategoryName)
                </span>

            </li>
        }
    </ul>
    <div id="subCategories">@Html.Partial("_ChildrenCategories", (Model.First().ChildrenCategories ?? Array.Empty<Category>()).ToList())</div>
</div>


@* @{  *@
@*     var a = new Dictionary<string, string> { { "categoryId", "15" } }; *@
@* } *@
@* <a asp-controller="Menu" asp-action="PartialProducts" asp-all-route-data="a">Tap Me</a> *@




@section Scripts
{
    <script>
    $(document).ready(function() {
        $("#list li").click(function() {
              $("li").removeClass("selected");
                $(this).addClass("selected");
              
            let categoryId = $(this).data("id");
              
              
              
              
              

            $.ajax({
                type: "GET",
                url: "PartialCategories",
                data: { categoryId: categoryId },
                success: function(result) {
                    $("#subCategories").html(result);
                }
            });
        });
        // $(window).resize(function() {
        //      if ($(window).width() >= 768) {
        //            $("ul").show();
        //         }
        //      });
    });
    </script>
}